
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../cues/">
      
      
        <link rel="next" href="../xml/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>API Documentation - cuemsutils</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="cuemsutils" class="md-header__button md-logo" aria-label="cuemsutils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            cuemsutils
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/cuems/cuems-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="cuemsutils" class="md-nav__button md-logo" aria-label="cuemsutils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    cuemsutils
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cuems/cuems-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cuems-utils
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cues
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommunicatorServices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.Communicator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communicator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Communicator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.Communicator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommunicatorService
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommunicatorService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService.reply" class="md-nav__link">
    <span class="md-ellipsis">
      
        reply
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.IpcAddress" class="md-nav__link">
    <span class="md-ellipsis">
      
        IpcAddress
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse" class="md-nav__link">
    <span class="md-ellipsis">
      
        NngRequestResponse
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NngRequestResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.reply" class="md-nav__link">
    <span class="md-ellipsis">
      
        reply
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigBase
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigBase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase.conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        conf_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase.set_dir_hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_dir_hierarchy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigManager
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigManager
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.check_project_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_project_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.get_audio_output_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_audio_output_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.get_video_output_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_video_output_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_net_and_node_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_net_and_node_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_network_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_network_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.project_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        project_path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CopyMoveVersioned" class="md-nav__link">
    <span class="md-ellipsis">
      
        CopyMoveVersioned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecode
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CTimecode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.milliseconds" class="md-nav__link">
    <span class="md-ellipsis">
      
        milliseconds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__add__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __add__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __eq__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__ge__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __ge__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__gt__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __gt__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__le__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __le__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__lt__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __lt__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__mul__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __mul__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__ne__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __ne__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__sub__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __sub__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__truediv__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __truediv__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.return_in_other_framerate" class="md-nav__link">
    <span class="md-ellipsis">
      
        return_in_other_framerate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecodeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecodeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices" class="md-nav__link">
    <span class="md-ellipsis">
      
        HubServices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.ConnectionInfo" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConnectionInfo
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService" class="md-nav__link">
    <span class="md-ellipsis">
      
        HubService
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HubService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService.get_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService.send_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_message
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub" class="md-nav__link">
    <span class="md-ellipsis">
      
        NngBusHub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NngBusHub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.disable_auto_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_auto_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.disable_auto_pong" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_auto_pong
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.enable_auto_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_auto_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.enable_auto_pong" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_auto_pong
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_active_connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_active_connections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_connection_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_connection_count
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_connection_health_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_connection_health_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.is_connection_healthy" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_connection_healthy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.send_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.send_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start" class="md-nav__link">
    <span class="md-ellipsis">
      
        start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start_dialer" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_dialer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start_listener" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_listener
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.SignalEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignalEngine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.SignalEngine.SignalEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignalEngine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.StringSanitizer" class="md-nav__link">
    <span class="md-ellipsis">
      
        StringSanitizer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.StringSanitizer.StringSanitizer" class="md-nav__link">
    <span class="md-ellipsis">
      
        StringSanitizer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.Uuid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uuid
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.Uuid.Uuid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uuid
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../xml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Xml
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommunicatorServices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.Communicator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communicator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Communicator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.Communicator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommunicatorService
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CommunicatorService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService.reply" class="md-nav__link">
    <span class="md-ellipsis">
      
        reply
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.CommunicatorService.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.IpcAddress" class="md-nav__link">
    <span class="md-ellipsis">
      
        IpcAddress
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse" class="md-nav__link">
    <span class="md-ellipsis">
      
        NngRequestResponse
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NngRequestResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.reply" class="md-nav__link">
    <span class="md-ellipsis">
      
        reply
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CommunicatorServices.NngRequestResponse.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigBase
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigBase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase.conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        conf_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigBase.ConfigBase.set_dir_hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_dir_hierarchy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigManager
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigManager
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.check_project_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        check_project_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.get_audio_output_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_audio_output_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.get_video_output_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_video_output_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_net_and_node_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_net_and_node_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_network_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_network_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_mappings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_mappings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.load_project_settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_project_settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.ConfigManager.ConfigManager.project_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        project_path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CopyMoveVersioned" class="md-nav__link">
    <span class="md-ellipsis">
      
        CopyMoveVersioned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecode
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CTimecode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.milliseconds" class="md-nav__link">
    <span class="md-ellipsis">
      
        milliseconds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__add__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __add__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __eq__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__ge__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __ge__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__gt__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __gt__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__le__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __le__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__lt__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __lt__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__mul__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __mul__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__ne__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __ne__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__sub__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __sub__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.__truediv__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __truediv__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecode.return_in_other_framerate" class="md-nav__link">
    <span class="md-ellipsis">
      
        return_in_other_framerate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.CTimecode.CTimecodeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        CTimecodeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices" class="md-nav__link">
    <span class="md-ellipsis">
      
        HubServices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.ConnectionInfo" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConnectionInfo
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService" class="md-nav__link">
    <span class="md-ellipsis">
      
        HubService
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HubService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService.get_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.HubService.send_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_message
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub" class="md-nav__link">
    <span class="md-ellipsis">
      
        NngBusHub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NngBusHub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.disable_auto_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_auto_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.disable_auto_pong" class="md-nav__link">
    <span class="md-ellipsis">
      
        disable_auto_pong
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.enable_auto_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_auto_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.enable_auto_pong" class="md-nav__link">
    <span class="md-ellipsis">
      
        enable_auto_pong
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_active_connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_active_connections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_connection_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_connection_count
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_connection_health_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_connection_health_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.get_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.is_connection_healthy" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_connection_healthy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.send_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_message
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.send_ping" class="md-nav__link">
    <span class="md-ellipsis">
      
        send_ping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start" class="md-nav__link">
    <span class="md-ellipsis">
      
        start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start_dialer" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_dialer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuemsutils.tools.HubServices.NngBusHub.start_listener" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_listener
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.SignalEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignalEngine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.SignalEngine.SignalEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignalEngine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.StringSanitizer" class="md-nav__link">
    <span class="md-ellipsis">
      
        StringSanitizer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.StringSanitizer.StringSanitizer" class="md-nav__link">
    <span class="md-ellipsis">
      
        StringSanitizer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.Uuid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uuid
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuemsutils.tools.Uuid.Uuid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uuid
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-documentation">API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.CommunicatorServices"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CommunicatorServices.Communicator" class="doc doc-heading">
            <code>Communicator</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicatorService (cuemsutils.tools.CommunicatorServices.CommunicatorService)" href="#cuemsutils.tools.CommunicatorServices.CommunicatorService">CommunicatorService</a></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Communicator</span><span class="p">(</span><span class="n">CommunicatorService</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">address</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
        <span class="n">communicator_service</span><span class="p">:</span><span class="n">CommunicatorService</span> <span class="o">=</span> <span class="n">NngRequestResponse</span><span class="p">,</span>
        <span class="n">requester_dials</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Communicator instance with address and communicator service.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - address (str): The address to connect or listen for connections.</span>
<span class="sd">        - communicator_service (Callable[[str, bool], CommunicatorService]): The communicator service to use.</span>
<span class="sd">        - requester_dials (bool): If True, the instance will dial the address. If False, it will listen for connections.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">check_path</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">check_path</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">dir_only</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">NotADirectoryError</span><span class="p">,</span> <span class="ne">PermissionError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;ipc://&#39;</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;ipc://&quot;</span> <span class="o">+</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">requester_dials</span> <span class="o">=</span> <span class="n">requester_dials</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">:</span><span class="n">CommunicatorService</span> <span class="o">=</span> <span class="n">communicator_service</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requester_dials</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_processor</span><span class="p">):</span>
       <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="n">request_processor</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_callable</span><span class="p">(</span><span class="s1">&#39;responder_connect&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="o">.</span><span class="n">responder_connect</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_get_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_callable</span><span class="p">(</span><span class="s1">&#39;responder_get_request&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="o">.</span><span class="n">responder_get_request</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_post_reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_callable</span><span class="p">(</span><span class="s1">&#39;responder_post_reply&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="o">.</span><span class="n">responder_post_reply</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_has_callable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if communicator_service has callable attribute of the given name&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not an attribute of </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">,</span> <span class="n">name</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not a callable attribute of </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.Communicator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">communicator_service</span><span class="o">=</span><span class="n">NngRequestResponse</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize Communicator instance with address and communicator service.</p>
<p>Parameters:
- address (str): The address to connect or listen for connections.
- communicator_service (Callable[[str, bool], CommunicatorService]): The communicator service to use.
- requester_dials (bool): If True, the instance will dial the address. If False, it will listen for connections.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">address</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span>
    <span class="n">communicator_service</span><span class="p">:</span><span class="n">CommunicatorService</span> <span class="o">=</span> <span class="n">NngRequestResponse</span><span class="p">,</span>
    <span class="n">requester_dials</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Communicator instance with address and communicator service.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - address (str): The address to connect or listen for connections.</span>
<span class="sd">    - communicator_service (Callable[[str, bool], CommunicatorService]): The communicator service to use.</span>
<span class="sd">    - requester_dials (bool): If True, the instance will dial the address. If False, it will listen for connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">check_path</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">check_path</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">dir_only</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">NotADirectoryError</span><span class="p">,</span> <span class="ne">PermissionError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;ipc://&#39;</span><span class="p">:</span>
        <span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;ipc://&quot;</span> <span class="o">+</span> <span class="n">address</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">requester_dials</span> <span class="o">=</span> <span class="n">requester_dials</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">communicator_service</span><span class="p">:</span><span class="n">CommunicatorService</span> <span class="o">=</span> <span class="n">communicator_service</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requester_dials</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CommunicatorServices.CommunicatorService" class="doc doc-heading">
            <code>CommunicatorService</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CommunicatorService</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Send request dic and return response dict  &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_processor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get request, give it to request processor, and return the response from it  &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.CommunicatorService.reply" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reply</span><span class="p">(</span><span class="n">request_processor</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get request, give it to request processor, and return the response from it</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_processor</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Get request, give it to request processor, and return the response from it  &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.CommunicatorService.send_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Send request dic and return response dict</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Send request dic and return response dict  &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CommunicatorServices.IpcAddress" class="doc doc-heading">
            <code>IpcAddress</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>



        <p>IPC addresses for the different services</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">IpcAddress</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; IPC addresses for the different services &quot;&quot;&quot;</span>
    <span class="n">HWDISCOVERY</span> <span class="o">=</span> <span class="s1">&#39;/tmp/hwdiscovery.ipc&#39;</span>
    <span class="n">NODECONF</span> <span class="o">=</span> <span class="s1">&#39;/tmp/nodeconf.ipc&#39;</span>
    <span class="n">EDITOR</span> <span class="o">=</span> <span class="s1">&#39;/tmp/editor.ipc&#39;</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CommunicatorServices.NngRequestResponse" class="doc doc-heading">
            <code>NngRequestResponse</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommunicatorService (cuemsutils.tools.CommunicatorServices.CommunicatorService)" href="#cuemsutils.tools.CommunicatorServices.CommunicatorService">CommunicatorService</a></code></p>



        <p>Communicates over NNG (nanomsg) using a Request-Response protocol</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NngRequestResponse</span><span class="p">(</span><span class="n">CommunicatorService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Communicates over NNG (nanomsg) using a Request-Response protocol&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize NngRequestResponse instance with address and dialing/listening mode.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - address (str): The address to connect or listen for connections.</span>
<span class="sd">        - requester_dials (bool, optional): If True, the instance requester will dial the address and replier will listen. If False, it will be the opposite way, requester listens and replier dials. Default is True.</span>

<span class="sd">        The instance will set up the parameters for request and reply sockets based on the requester_dials value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="k">if</span> <span class="n">requester_dials</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params_request</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;listen&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">params_request</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;listen&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a request to the specified address and return the response.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - request (dict): The request to be sent. It should be a dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - dict: The response received from the address. It will be a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">Req0</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params_request</span><span class="p">)</span> <span class="k">as</span> <span class="n">socket</span><span class="p">:</span>
                <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">encoded_request</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
                    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">asend</span><span class="p">(</span><span class="n">encoded_request</span><span class="p">)</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response</span><span class="p">(</span><span class="n">socket</span><span class="p">)</span>
                    <span class="n">decoded_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;receiving: </span><span class="si">{</span><span class="n">decoded_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">decoded_response</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while sending request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_get_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">socket</span><span class="p">:</span> <span class="n">Req0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the response from the socket.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - socket (Req0): The socket to get the response from.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - bytes: The response from the socket.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">arecv</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_processor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously handle incoming requests and respond using the provided request processor.</span>

<span class="sd">        This function sets up a Rep0 socket with parameters based on the instance&#39;s configuration.</span>
<span class="sd">        It then enters a loop where it listens for incoming requests, processes them using the provided</span>
<span class="sd">        request processor, and sends the response back to the requester.</span>
<span class="sd">        Parameters:</span>
<span class="sd">        - request_processor (Callable[[dict], dict]): A function that takes a request dictionary as input and returns a response dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None: This function is designed to run indefinitely, handling incoming requests and responses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">Rep0</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span><span class="p">)</span> <span class="k">as</span> <span class="n">socket</span><span class="p">:</span>
                <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                    <span class="n">request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">arecv</span><span class="p">()</span>
                    <span class="n">decoded_request</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>  <span class="c1"># Parse the JSON request</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">decoded_request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">request_processor</span><span class="p">):</span>
                        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request_processor</span><span class="p">(</span><span class="n">decoded_request</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
                        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="n">request_processor</span><span class="p">,</span> <span class="n">decoded_request</span><span class="p">))</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_respond</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while handling request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">socket</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">encoded_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending: </span><span class="si">{</span><span class="n">encoded_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">asend</span><span class="p">(</span><span class="n">encoded_response</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while sending response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">responder</span> <span class="o">=</span> <span class="n">Rep0</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_get_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">responder</span><span class="o">.</span><span class="n">new_context</span><span class="p">()</span>
            <span class="n">request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">arecv</span><span class="p">()</span>
            <span class="n">decoded_request</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>  <span class="c1"># Parse the JSON request</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">decoded_request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling callback function async&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">callback</span><span class="p">(</span><span class="n">decoded_request</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling sync callback function in executor&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">decoded_request</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while handling request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">responder_post_reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_respond</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while sending response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.NngRequestResponse.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize NngRequestResponse instance with address and dialing/listening mode.</p>
<p>Parameters:
- address (str): The address to connect or listen for connections.
- requester_dials (bool, optional): If True, the instance requester will dial the address and replier will listen. If False, it will be the opposite way, requester listens and replier dials. Default is True.</p>
<p>The instance will set up the parameters for request and reply sockets based on the requester_dials value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">requester_dials</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize NngRequestResponse instance with address and dialing/listening mode.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - address (str): The address to connect or listen for connections.</span>
<span class="sd">    - requester_dials (bool, optional): If True, the instance requester will dial the address and replier will listen. If False, it will be the opposite way, requester listens and replier dials. Default is True.</span>

<span class="sd">    The instance will set up the parameters for request and reply sockets based on the requester_dials value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
    <span class="k">if</span> <span class="n">requester_dials</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_request</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;listen&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">params_request</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;listen&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.NngRequestResponse.reply" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reply</span><span class="p">(</span><span class="n">request_processor</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Asynchronously handle incoming requests and respond using the provided request processor.</p>
<p>This function sets up a Rep0 socket with parameters based on the instance's configuration.
It then enters a loop where it listens for incoming requests, processes them using the provided
request processor, and sends the response back to the requester.
Parameters:
- request_processor (Callable[[dict], dict]): A function that takes a request dictionary as input and returns a response dictionary.</p>
<p>Returns:
- None: This function is designed to run indefinitely, handling incoming requests and responses.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_processor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously handle incoming requests and respond using the provided request processor.</span>

<span class="sd">    This function sets up a Rep0 socket with parameters based on the instance&#39;s configuration.</span>
<span class="sd">    It then enters a loop where it listens for incoming requests, processes them using the provided</span>
<span class="sd">    request processor, and sends the response back to the requester.</span>
<span class="sd">    Parameters:</span>
<span class="sd">    - request_processor (Callable[[dict], dict]): A function that takes a request dictionary as input and returns a response dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - None: This function is designed to run indefinitely, handling incoming requests and responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">Rep0</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params_reply</span><span class="p">)</span> <span class="k">as</span> <span class="n">socket</span><span class="p">:</span>
            <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">arecv</span><span class="p">()</span>
                <span class="n">decoded_request</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>  <span class="c1"># Parse the JSON request</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">decoded_request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">request_processor</span><span class="p">):</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request_processor</span><span class="p">(</span><span class="n">decoded_request</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="n">request_processor</span><span class="p">,</span> <span class="n">decoded_request</span><span class="p">))</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_respond</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while handling request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CommunicatorServices.NngRequestResponse.send_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Send a request to the specified address and return the response.</p>
<p>Parameters:
- request (dict): The request to be sent. It should be a dictionary.</p>
<p>Returns:
- dict: The response received from the address. It will be a dictionary.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CommunicatorServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send a request to the specified address and return the response.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - request (dict): The request to be sent. It should be a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - dict: The response received from the address. It will be a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">Req0</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params_request</span><span class="p">)</span> <span class="k">as</span> <span class="n">socket</span><span class="p">:</span>
            <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">encoded_request</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">asend</span><span class="p">(</span><span class="n">encoded_request</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response</span><span class="p">(</span><span class="n">socket</span><span class="p">)</span>
                <span class="n">decoded_response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;receiving: </span><span class="si">{</span><span class="n">decoded_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">decoded_response</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while sending request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.ConfigBase"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.ConfigBase.ConfigBase" class="doc doc-heading">
            <code>ConfigBase</code>


</h2>


    <div class="doc doc-contents ">










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/ConfigBase.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigBase</span><span class="p">():</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_base_settings</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span>

    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_base_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CUEMS_CONF_PATH&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">base_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">=</span> <span class="nb">dir</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_path</span><span class="p">(</span><span class="s1">&#39;settings.xml&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception catched while loading settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="c1"># HELPER FUNCTIONS #</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">conf_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the path to the configuration file.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_name (str): The name of the file to be checked.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The path to the configuration file.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: If the configuration file does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conf_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">conf_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Configuration file </span><span class="si">{</span><span class="n">conf_path</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">conf_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_dir_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the directory hierarchy for the library path.</span>
<span class="sd">        &quot;&quot;&quot;</span>      
        <span class="n">dirs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;projects&#39;</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="s1">&#39;waveforms&#39;</span><span class="p">),</span>
            <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="s1">&#39;thumbnails&#39;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">trash</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;trash&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">]</span>
        <span class="n">dirs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">trash</span><span class="p">)</span>

        <span class="n">paths_to_check</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">library_path</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">]</span>
        <span class="n">paths_to_check</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmp_path</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">each_path</span> <span class="ow">in</span> <span class="n">paths_to_check</span><span class="p">:</span>
                <span class="n">mkdir_recursive</span><span class="p">(</span><span class="n">each_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;error: </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">e</span><span class="p">))</span>

    <span class="c1"># CLASS PROPERTIES #</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">config_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_dir</span>

    <span class="nd">@config_dir</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">config_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Configuration directory </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config_dir</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">library_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;library_path&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tmp_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;tmp_path&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">database_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;database_name&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">show_lock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;show_lock_file&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">editor_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;editor_url&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;controller_url&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">templates_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;templates_path&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_interfaces_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;controller_interfaces_template&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_interfaces_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;node_interfaces_template&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">controller_lock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;controller_lock_file&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_conf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;node&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">host_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_uuid</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">.local&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;http://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">osc_initial_port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;osc_in_port_base&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigBase.ConfigBase.conf_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">conf_path</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the path to the configuration file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to be checked.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the configuration file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the configuration file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigBase.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">conf_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the path to the configuration file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to be checked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path to the configuration file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the configuration file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conf_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">conf_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Configuration file </span><span class="si">{</span><span class="n">conf_path</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">conf_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigBase.ConfigBase.set_dir_hierarchy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_dir_hierarchy</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Sets the directory hierarchy for the library path.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigBase.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_dir_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the directory hierarchy for the library path.</span>
<span class="sd">    &quot;&quot;&quot;</span>      
    <span class="n">dirs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;projects&#39;</span><span class="p">,</span>
        <span class="s1">&#39;media&#39;</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="s1">&#39;waveforms&#39;</span><span class="p">),</span>
        <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="s1">&#39;thumbnails&#39;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">trash</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;trash&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">]</span>
    <span class="n">dirs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">trash</span><span class="p">)</span>

    <span class="n">paths_to_check</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">library_path</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">]</span>
    <span class="n">paths_to_check</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmp_path</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">each_path</span> <span class="ow">in</span> <span class="n">paths_to_check</span><span class="p">:</span>
            <span class="n">mkdir_recursive</span><span class="p">(</span><span class="n">each_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;error: </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.ConfigManager"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.ConfigManager.ConfigManager" class="doc doc-heading">
            <code>ConfigManager</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ConfigBase (cuemsutils.tools.ConfigBase.ConfigBase)" href="#cuemsutils.tools.ConfigBase.ConfigBase">ConfigBase</a></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ConfigManager</span><span class="p">(</span><span class="n">ConfigBase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">CUEMS_CONF_PATH</span><span class="p">,</span> <span class="n">load_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ConfigManager constructor.</span>
<span class="sd">        This class is responsible for loading the configuration files and providing</span>
<span class="sd">        the configuration data to the rest of the application.</span>

<span class="sd">        It also provides methods to check the project files and to load them on demand.</span>

<span class="sd">        If load_all is True, the configuration files will be loaded and the configuration</span>
<span class="sd">        will be available for the rest of the application on object initialization.</span>
<span class="sd">        If load_all is False, the configuration will be loaded on demand.</span>

<span class="sd">        Base configuration directory is set to /etc/cuems/ by default.</span>
<span class="sd">        If the environment variable CUEMS_CONF_PATH is set, it will be used instead.</span>
<span class="sd">        If config_dir parameter is set, it will override the default value.</span>

<span class="sd">        Specifically, base configuration directory precedence is:</span>
<span class="sd">        - Environment variable CUEMS_CONF_PATH</span>
<span class="sd">        - config_dir parameter</span>
<span class="sd">        - /etc/cuems/ (i.e. CUEMS_CONF_PATH constant value) (default value)</span>

<span class="sd">        Args:</span>
<span class="sd">            config_dir (str): The directory containing the configuration files.</span>
<span class="sd">            load_all (bool): Whether to load all the configuration files.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the configuration files are not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize with default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">using_default_mappings</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;audio_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;audio_outputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;video_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;video_outputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;dmx_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;dmx_outputs&#39;</span><span class="p">:[]</span>
        <span class="p">}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">load_all</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_network_map</span>

    <span class="nd">@network_map</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_network_map</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_network_map</span>

    <span class="nd">@node_network_map</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">NetworkMap</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">NetworkMap</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_node_network_map</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_uuid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_node_network_map</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mappings</span>

    <span class="nd">@mappings</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mappings</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_mappings</span>

    <span class="nd">@node_mappings</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">ProjectMappings</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ProjectMappings</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_node_mappings</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_uuid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_node_mappings</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the system configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize with empty values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;audio_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;audio_outputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;video_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;video_outputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;dmx_inputs&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;dmx_outputs&#39;</span><span class="p">:[]</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_dir_hierarchy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_network_map</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_net_and_node_mappings</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the network map from the base configuration file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">netmap</span> <span class="o">=</span> <span class="n">NetworkMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_path</span><span class="p">(</span><span class="s1">&#39;network_map.xml&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="n">netmap</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node_network_map</span> <span class="o">=</span> <span class="n">netmap</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception catched while loading network map: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_net_and_node_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the network and node mappings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mappings_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span> <span class="s1">&#39;mappings.xml&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">mappings_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_path</span><span class="p">(</span><span class="s1">&#39;default_mappings.xml&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">project_mappings</span> <span class="o">=</span> <span class="n">ProjectMappings</span><span class="p">(</span><span class="n">mappings_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">processed</span> <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception catched while loading mappings file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node uuid is: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Select just output names for node_hw_outputs var</span>
        <span class="c1"># e.g: node_hw_outputs[&quot;audio_outputs&quot;] = [&quot;system:playback_1&quot;, &quot;system:playback_2&quot;]</span>
        <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">port_type_dict</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">port_types</span><span class="p">,</span> <span class="n">port_type_list</span> <span class="ow">in</span> <span class="n">port_type_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">port_type_list</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">port_type</span><span class="p">,</span> <span class="n">port_type_content</span> <span class="ow">in</span> <span class="n">port</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                                <span class="n">name</span> <span class="o">=</span> <span class="n">port_type_content</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="p">[</span><span class="n">section</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">port_types</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node hardware outputs are: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_project_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the project configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            project_uname (str): The name of the project.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">## Initialize with empty values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_default_outputs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="n">project_uname</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">load_project_settings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_project_mappings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_project_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the project settings from the project file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">settings_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="n">project_uname</span><span class="p">,</span> <span class="s1">&#39;settings.xml&#39;</span><span class="p">)</span>
            <span class="n">conf</span> <span class="o">=</span> <span class="n">ProjectSettings</span><span class="p">(</span>
                <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;project_settings&#39;</span><span class="p">,</span>
                <span class="n">xmlfile</span><span class="o">=</span><span class="n">settings_path</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> settings not found. Keeping default settings.&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception in load_project_settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">corrected_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">corrected_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">corrected_dict</span>

        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> settings loaded&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_project_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the project mappings from the project file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mappings_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="n">project_uname</span><span class="p">,</span> <span class="s1">&#39;mappings.xml&#39;</span><span class="p">)</span>
            <span class="n">project_mappings</span> <span class="o">=</span> <span class="n">ProjectMappings</span><span class="p">(</span><span class="n">mappings_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">processed</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_uuid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;No mappings assigned for this node in project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project mappings not found. Adopting default mappings.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mappings</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception in load_project_mappings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_nodes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mappings</span><span class="p">[</span><span class="s1">&#39;number_of_nodes&#39;</span><span class="p">])</span> <span class="c1"># type: ignore[index]</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> mappings loaded&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_video_output_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the video output id for the given mapping name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;default_video_output&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;outputs&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">each_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">][</span><span class="s1">&#39;outputs&#39;</span><span class="p">]:</span>
                    <span class="k">for</span> <span class="n">each_map</span> <span class="ow">in</span> <span class="n">each_out</span><span class="p">[</span><span class="s1">&#39;mappings&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="n">each_map</span><span class="p">[</span><span class="s1">&#39;mapped_to&#39;</span><span class="p">]:</span>
                            <span class="k">return</span> <span class="n">each_out</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video output wrongly mapped&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_audio_output_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the audio output id for the given mapping name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;default_audio_output&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">each_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span><span class="p">[</span><span class="s1">&#39;audio&#39;</span><span class="p">][</span><span class="s1">&#39;outputs&#39;</span><span class="p">]:</span> <span class="c1"># type: ignore[index]</span>
                <span class="k">for</span> <span class="n">each_map</span> <span class="ow">in</span> <span class="n">each_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;mappings&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="n">each_map</span><span class="p">[</span><span class="s1">&#39;mapped_to&#39;</span><span class="p">]:</span>
                        <span class="k">return</span> <span class="n">each_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Audio output wrongly mapped&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_project_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the project mappings are correct.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">using_default_mappings</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="n">nodes_to_check</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes_to_check</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">area</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">contents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">element</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]:</span>
                                <span class="n">err_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s1"> mapping incorrect: </span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> not present in node: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
                                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>
                                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1">## helper functions</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">project_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the path to the project file if it exists.</span>

<span class="sd">        Args:</span>
<span class="sd">            project_uname (str): The name of the project.</span>
<span class="sd">            file_name (str): The name of the file to be checked.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The path to the project file.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: If the project file does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">project_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">library_path</span><span class="p">,</span> <span class="s1">&#39;projects&#39;</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">project_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project file </span><span class="si">{</span><span class="n">project_path</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">project_path</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config_dir</span><span class="o">=</span><span class="n">CUEMS_CONF_PATH</span><span class="p">,</span> <span class="n">load_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>ConfigManager constructor.
This class is responsible for loading the configuration files and providing
the configuration data to the rest of the application.</p>
<p>It also provides methods to check the project files and to load them on demand.</p>
<p>If load_all is True, the configuration files will be loaded and the configuration
will be available for the rest of the application on object initialization.
If load_all is False, the configuration will be loaded on demand.</p>
<p>Base configuration directory is set to /etc/cuems/ by default.
If the environment variable CUEMS_CONF_PATH is set, it will be used instead.
If config_dir parameter is set, it will override the default value.</p>
<p>Specifically, base configuration directory precedence is:
- Environment variable CUEMS_CONF_PATH
- config_dir parameter
- /etc/cuems/ (i.e. CUEMS_CONF_PATH constant value) (default value)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory containing the configuration files.</p>
              </div>
            </td>
            <td>
                  <code><span title="cuemsutils.tools.ConfigManager.CUEMS_CONF_PATH">CUEMS_CONF_PATH</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>load_all</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to load all the configuration files.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the configuration files are not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">CUEMS_CONF_PATH</span><span class="p">,</span> <span class="n">load_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ConfigManager constructor.</span>
<span class="sd">    This class is responsible for loading the configuration files and providing</span>
<span class="sd">    the configuration data to the rest of the application.</span>

<span class="sd">    It also provides methods to check the project files and to load them on demand.</span>

<span class="sd">    If load_all is True, the configuration files will be loaded and the configuration</span>
<span class="sd">    will be available for the rest of the application on object initialization.</span>
<span class="sd">    If load_all is False, the configuration will be loaded on demand.</span>

<span class="sd">    Base configuration directory is set to /etc/cuems/ by default.</span>
<span class="sd">    If the environment variable CUEMS_CONF_PATH is set, it will be used instead.</span>
<span class="sd">    If config_dir parameter is set, it will override the default value.</span>

<span class="sd">    Specifically, base configuration directory precedence is:</span>
<span class="sd">    - Environment variable CUEMS_CONF_PATH</span>
<span class="sd">    - config_dir parameter</span>
<span class="sd">    - /etc/cuems/ (i.e. CUEMS_CONF_PATH constant value) (default value)</span>

<span class="sd">    Args:</span>
<span class="sd">        config_dir (str): The directory containing the configuration files.</span>
<span class="sd">        load_all (bool): Whether to load all the configuration files.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the configuration files are not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize with default values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">using_default_mappings</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;audio_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;audio_outputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;video_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;video_outputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;dmx_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;dmx_outputs&#39;</span><span class="p">:[]</span>
    <span class="p">}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">load_all</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.check_project_mappings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_project_mappings</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if the project mappings are correct.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_project_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the project mappings are correct.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">using_default_mappings</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="n">nodes_to_check</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes_to_check</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">area</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">contents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">element</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]:</span>
                            <span class="n">err_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s1"> mapping incorrect: </span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> not present in node: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
                            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.get_audio_output_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_audio_output_id</span><span class="p">(</span><span class="n">mapping_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the audio output id for the given mapping name.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_audio_output_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the audio output id for the given mapping name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;default_audio_output&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">each_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span><span class="p">[</span><span class="s1">&#39;audio&#39;</span><span class="p">][</span><span class="s1">&#39;outputs&#39;</span><span class="p">]:</span> <span class="c1"># type: ignore[index]</span>
            <span class="k">for</span> <span class="n">each_map</span> <span class="ow">in</span> <span class="n">each_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;mappings&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="n">each_map</span><span class="p">[</span><span class="s1">&#39;mapped_to&#39;</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="n">each_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Audio output wrongly mapped&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.get_video_output_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_video_output_id</span><span class="p">(</span><span class="n">mapping_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the video output id for the given mapping name.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_video_output_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the video output id for the given mapping name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;default_video_output&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;outputs&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">each_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">][</span><span class="s1">&#39;outputs&#39;</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">each_map</span> <span class="ow">in</span> <span class="n">each_out</span><span class="p">[</span><span class="s1">&#39;mappings&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">mapping_name</span> <span class="o">==</span> <span class="n">each_map</span><span class="p">[</span><span class="s1">&#39;mapped_to&#39;</span><span class="p">]:</span>
                        <span class="k">return</span> <span class="n">each_out</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video output wrongly mapped&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_config</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the system configuration.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@logged</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the system configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize with empty values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;audio_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;audio_outputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;video_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;video_outputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;dmx_inputs&#39;</span><span class="p">:[],</span>
        <span class="s1">&#39;dmx_outputs&#39;</span><span class="p">:[]</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_dir_hierarchy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_network_map</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_net_and_node_mappings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_net_and_node_mappings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_net_and_node_mappings</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the network and node mappings.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_net_and_node_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the network and node mappings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mappings_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span> <span class="s1">&#39;mappings.xml&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">mappings_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_path</span><span class="p">(</span><span class="s1">&#39;default_mappings.xml&#39;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">project_mappings</span> <span class="o">=</span> <span class="n">ProjectMappings</span><span class="p">(</span><span class="n">mappings_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">processed</span> <span class="c1"># type: ignore[attr-defined]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception catched while loading mappings file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node uuid is: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_conf</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Select just output names for node_hw_outputs var</span>
    <span class="c1"># e.g: node_hw_outputs[&quot;audio_outputs&quot;] = [&quot;system:playback_1&quot;, &quot;system:playback_2&quot;]</span>
    <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">port_type_dict</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">port_types</span><span class="p">,</span> <span class="n">port_type_list</span> <span class="ow">in</span> <span class="n">port_type_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">port_type_list</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">port_type</span><span class="p">,</span> <span class="n">port_type_content</span> <span class="ow">in</span> <span class="n">port</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="n">name</span> <span class="o">=</span> <span class="n">port_type_content</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="p">[</span><span class="n">section</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">port_types</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node hardware outputs are: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_hw_outputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_network_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_network_map</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the network map from the base configuration file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_network_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the network map from the base configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">netmap</span> <span class="o">=</span> <span class="n">NetworkMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_path</span><span class="p">(</span><span class="s1">&#39;network_map.xml&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_map</span> <span class="o">=</span> <span class="n">netmap</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_network_map</span> <span class="o">=</span> <span class="n">netmap</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception catched while loading network map: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_project_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_project_config</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the project configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_uname</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the project.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@logged</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_project_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the project configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_uname (str): The name of the project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">## Initialize with empty values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_default_outputs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="n">project_uname</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">load_project_settings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_project_mappings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_project_mappings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_project_mappings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the project mappings from the project file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_project_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the project mappings from the project file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mappings_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="n">project_uname</span><span class="p">,</span> <span class="s1">&#39;mappings.xml&#39;</span><span class="p">)</span>
        <span class="n">project_mappings</span> <span class="o">=</span> <span class="n">ProjectMappings</span><span class="p">(</span><span class="n">mappings_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">processed</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="n">project_mappings</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_uuid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;No mappings assigned for this node in project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project mappings not found. Adopting default mappings.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_mappings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mappings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_node_mappings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_mappings</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception in load_project_mappings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">number_of_nodes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mappings</span><span class="p">[</span><span class="s1">&#39;number_of_nodes&#39;</span><span class="p">])</span> <span class="c1"># type: ignore[index]</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> mappings loaded&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.load_project_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_project_settings</span><span class="p">(</span><span class="n">project_uname</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Loads the project settings from the project file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_project_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads the project settings from the project file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">settings_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_path</span><span class="p">(</span><span class="n">project_uname</span><span class="p">,</span> <span class="s1">&#39;settings.xml&#39;</span><span class="p">)</span>
        <span class="n">conf</span> <span class="o">=</span> <span class="n">ProjectSettings</span><span class="p">(</span>
            <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;project_settings&#39;</span><span class="p">,</span>
            <span class="n">xmlfile</span><span class="o">=</span><span class="n">settings_path</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> settings not found. Keeping default settings.&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception in load_project_settings: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">corrected_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">corrected_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_conf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">corrected_dict</span>

    <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project </span><span class="si">{</span><span class="n">project_uname</span><span class="si">}</span><span class="s1"> settings loaded&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.ConfigManager.ConfigManager.project_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">project_path</span><span class="p">(</span><span class="n">project_uname</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the path to the project file if it exists.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_uname</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the project.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to be checked.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the project file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the project file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/ConfigManager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the path to the project file if it exists.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_uname (str): The name of the project.</span>
<span class="sd">        file_name (str): The name of the file to be checked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path to the project file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the project file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">library_path</span><span class="p">,</span> <span class="s1">&#39;projects&#39;</span><span class="p">,</span> <span class="n">project_uname</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">project_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Project file </span><span class="si">{</span><span class="n">project_path</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">project_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.CopyMoveVersioned"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.CTimecode"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CTimecode.CTimecode" class="doc doc-heading">
            <code>CTimecode</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="timecode.Timecode">Timecode</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CTimecode</span><span class="p">(</span><span class="n">Timecode</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_timecode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_seconds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">framerate</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="s1">&#39;ms&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">init_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">framerate</span><span class="p">,</span> <span class="n">init_dict</span><span class="p">,</span> <span class="n">start_seconds</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">start_seconds</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">start_seconds</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">framerate</span><span class="p">,</span> <span class="n">start_timecode</span><span class="p">,</span> <span class="n">start_seconds</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">init_dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">init_dict</span> <span class="o">=</span>  <span class="n">init_dict</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">milliseconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns time as milliseconds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#TODO: float math for other framerates                               </span>
        <span class="n">millis_per_frame</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">millis_per_frame</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_number</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">return_in_other_framerate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns a copy of the object with a different framerate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="n">framerate</span><span class="p">,</span> <span class="n">start_seconds</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;</span> <span class="n">other</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">other</span>

        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;</span> <span class="n">other</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span> 
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with the given timecode or frames</span>
<span class="sd">        added to this one</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># duplicate current one</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="n">tc</span><span class="o">.</span><span class="n">add_frames</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">tc</span><span class="o">.</span><span class="n">add_frames</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
                <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
                <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">tc</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with subtracted value&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="n">subtracted_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">subtracted_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">-</span> <span class="n">other</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
                <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
                <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">subtracted_frames</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with multiplied value&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="n">multiplied_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">multiplied_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">*</span> <span class="n">other</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
                <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
                <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">multiplied_frames</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with divided value&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
            <span class="n">div_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">div_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">/</span> <span class="n">other</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
                <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
                <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">div_frames</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__json__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CTimecode&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tc_to_string</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">frames_to_tc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;timecode&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
        <span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;framerate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;CTimecode&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="cuemsutils.tools.CTimecode.CTimecode.milliseconds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">milliseconds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>returns time as milliseconds</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__add__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>returns new CTimecode instance with the given timecode or frames
added to this one</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with the given timecode or frames</span>
<span class="sd">    added to this one</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># duplicate current one</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">add_frames</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">add_frames</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
            <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
            <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">tc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__ge__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__ge__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__gt__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__gt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&gt;</span> <span class="n">other</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
        <span class="k">return</span> <span class="bp">self</span> 
    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__le__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__le__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">other</span>
    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__lt__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__lt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">&lt;</span> <span class="n">other</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">other</span>

    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__mul__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__mul__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>returns new CTimecode instance with multiplied value</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with multiplied value&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="n">multiplied_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">multiplied_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">*</span> <span class="n">other</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
            <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
            <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">multiplied_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__ne__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__ne__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compares seconds of tc</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares seconds of tc&quot;&quot;&quot;</span> <span class="c1">#TODO: decide if we cheek framerate and frame equality or time equiality </span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">milliseconds</span>
    <span class="k">return</span> <span class="bp">NotImplemented</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__sub__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__sub__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>returns new CTimecode instance with subtracted value</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with subtracted value&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="n">subtracted_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">subtracted_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">-</span> <span class="n">other</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
            <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
            <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">subtracted_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.__truediv__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__truediv__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>returns new CTimecode instance with divided value</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns new CTimecode instance with divided value&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">CTimecode</span><span class="p">):</span>
        <span class="n">div_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">frames</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">div_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">/</span> <span class="n">other</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CTimecodeError</span><span class="p">(</span>
            <span class="s1">&#39;Type </span><span class="si">%s</span><span class="s1"> not supported for arithmetic.&#39;</span> <span class="o">%</span>
            <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">framerate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">div_frames</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.CTimecode.CTimecode.return_in_other_framerate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">return_in_other_framerate</span><span class="p">(</span><span class="n">framerate</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>returns a copy of the object with a different framerate.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">return_in_other_framerate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framerate</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns a copy of the object with a different framerate.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new</span> <span class="o">=</span> <span class="n">CTimecode</span><span class="p">(</span><span class="n">framerate</span><span class="o">=</span><span class="n">framerate</span><span class="p">,</span> <span class="n">start_seconds</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">new</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.CTimecode.CTimecodeError" class="doc doc-heading">
            <code>CTimecodeError</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Raised when an error occurred in timecode calculation</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/CTimecode.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CTimecodeError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when an error occurred in timecode calculation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.HubServices"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.HubServices.ConnectionInfo" class="doc doc-heading">
            <code>ConnectionInfo</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">



        <p>Information about an active bus connection.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ConnectionInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Information about an active bus connection.&quot;&quot;&quot;</span>
    <span class="n">pipe_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">sender</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">connected_at</span><span class="p">:</span> <span class="n">datetime</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.HubServices.HubService" class="doc doc-heading">
            <code>HubService</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HubService</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add message (dict or Message) to the queue to be sent to hub &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get message from the queue. Message.data is already JSON-decoded as dict &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.HubService.get_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_message</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get message from the queue. Message.data is already JSON-decoded as dict</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Get message from the queue. Message.data is already JSON-decoded as dict &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.HubService.send_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Add message (dict or Message) to the queue to be sent to hub</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Add message (dict or Message) to the queue to be sent to hub &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.HubServices.NngBusHub" class="doc doc-heading">
            <code>NngBusHub</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="HubService (cuemsutils.tools.HubServices.HubService)" href="#cuemsutils.tools.HubServices.HubService">HubService</a></code></p>



        <p>Communicates over NNG (nanomsg) using Bus topology for many-to-one, one-to-many messaging</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NngBusHub</span><span class="p">(</span><span class="n">HubService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Communicates over NNG (nanomsg) using Bus topology for many-to-one, one-to-many messaging &quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Mode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
        <span class="n">LISTENER</span> <span class="o">=</span> <span class="s2">&quot;listen&quot;</span>
        <span class="n">DIALER</span> <span class="o">=</span> <span class="s2">&quot;dial&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hub_address</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span><span class="n">Mode</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Nng_bus_hub instance with address and operational mode.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - hub_address (str): The address to connect or listen for bus connections.</span>
<span class="sd">        - mode (Mode): The operational mode - LISTENER (listens) or DIALER (dials)</span>

<span class="sd">        The instance will set up incoming and outgoing message queues for asynchronous message handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ConnectionInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># pipe_id -&gt; ConnectionInfo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">hub_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

        <span class="c1"># Connection health tracking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Ping/pong configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Nodes auto-respond by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pong_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start the bus communication by initializing the connection and launching message handlers.</span>

<span class="sd">        This method starts the bus connection based on the mode (LISTENER or DIALER),</span>
<span class="sd">        then launches infinite receiver and sender loops. It monitors both tasks and</span>
<span class="sd">        exits when the first exception occurs or connection is broken, properly cleaning</span>
<span class="sd">        up all running tasks.</span>

<span class="sd">        Raises:</span>
<span class="sd">        - ValueError: If an unknown mode is set.</span>
<span class="sd">        - Exception: Re-raises any exception that occurs during task execution after cleanup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">LISTENER</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_listener</span><span class="p">()</span>
            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">DIALER</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dialer</span><span class="p">()</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">sender_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_send_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>
            <span class="n">receiver_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_receiver_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;receiver&quot;</span><span class="p">)</span>
            <span class="n">ping_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ping&quot;</span><span class="p">)</span>

            <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">sender_task</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">]</span>
            <span class="n">task_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">sender_task</span><span class="p">:</span> <span class="s2">&quot;sender&quot;</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">:</span> <span class="s2">&quot;receiver&quot;</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">}</span>

            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> tasks started: sender, receiver, ping&quot;</span><span class="p">)</span>

            <span class="n">done_tasks</span><span class="p">,</span> <span class="n">pending_tasks</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">return_when</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">FIRST_EXCEPTION</span><span class="p">)</span>

            <span class="c1"># Check if completed task had an exception</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">done_tasks</span><span class="p">:</span>
                <span class="n">task_name</span> <span class="o">=</span> <span class="n">task_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> handler failed: </span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">())</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> handler exited unexpectedly (no exception)&quot;</span><span class="p">)</span>

            <span class="c1"># Log pending task cancellation</span>
            <span class="n">pending_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">task_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">pending_tasks</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">pending_names</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cancelling pending tasks: </span><span class="si">{</span><span class="n">pending_names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Cancel and await pending tasks</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">pending_tasks</span><span class="p">:</span>
                <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">task</span>
                <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> start() exiting - all tasks terminated&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while starting tasks: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Cancel any running tasks</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="p">[</span><span class="n">sender_task</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">]:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                    <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">await</span> <span class="n">task</span>
                    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">raise</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the bus connection in LISTENER mode (listening for connections).</span>

<span class="sd">        Creates a Bus0 socket that listens on the configured address with a 100ms receive timeout.</span>
<span class="sd">        TCP keepalive is enabled BEFORE listening to ensure it applies to all connections.</span>
<span class="sd">        Callbacks are registered BEFORE listening to ensure no connection events are missed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create socket first, set options and callbacks, then listen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">Bus0</span><span class="p">(</span><span class="n">recv_timeout</span><span class="o">=</span><span class="n">RECV_TIMEOUT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_callbacks</span><span class="p">()</span>  <span class="c1"># Register callbacks BEFORE listen to catch all events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LISTENER started on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">, tcp_keepalive=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_dialer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the bus connection in DIALER mode (dialing to controller).</span>

<span class="sd">        Creates a Bus0 socket that dials to the configured address with a 100ms receive timeout.</span>
<span class="sd">        TCP keepalive is enabled BEFORE dialing to ensure it applies to the connection.</span>
<span class="sd">        Non-blocking dial is used to allow reconnection if controller is not yet available.</span>
<span class="sd">        Callbacks are registered BEFORE dialing to ensure no connection events are missed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create socket first, set options and callbacks, then dial (non-blocking for reconnection support)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">Bus0</span><span class="p">(</span><span class="n">recv_timeout</span><span class="o">=</span><span class="n">RECV_TIMEOUT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Set explicit reconnection parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_min</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># 1 second minimum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_max</span> <span class="o">=</span> <span class="mi">30000</span>  <span class="c1"># 30 seconds maximum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_callbacks</span><span class="p">()</span>  <span class="c1"># Register callbacks BEFORE dial to catch all events</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DIALER options set: tcp_keepalive=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span>
                     <span class="sa">f</span><span class="s2">&quot;reconnect_time_min=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_min</span><span class="si">}</span><span class="s2">ms, &quot;</span> <span class="o">+</span>
                     <span class="sa">f</span><span class="s2">&quot;reconnect_time_max=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_max</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">dial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DIALER dialing </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2"> (non-blocking)&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">Message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Queue a message to be sent to the bus.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - message (dict | Message): The message to be sent. Must be a dict or Message object with dict data.</span>

<span class="sd">        Raises:</span>
<span class="sd">        - TypeError: If message is not a dict or Message object, or if Message.data is not a dict.</span>

<span class="sd">        The message is JSON-encoded and placed in the outgoing queue to be sent by the sender handler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Extract data from Message object or use raw data</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">Message</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message.data must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">message</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;send_message requires dict or Message, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># JSON-encode the dict</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a message from the incoming queue.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - Message: The next message received from the bus. The `data` field is already JSON-decoded as a dict.</span>
<span class="sd">                   This method blocks until a message is available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_active_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ConnectionInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of all active connections.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - List[ConnectionInfo]: List of all active connection information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of active connections.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - int: Number of currently active connections.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection_health_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get connection health information based on message activity.</span>

<span class="sd">        This is particularly useful for DIALERs to check if they&#39;re still </span>
<span class="sd">        connected to the controller, since nodes don&#39;t track the controller</span>
<span class="sd">        connection in active_connections.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</span>

<span class="sd">        Returns:</span>
<span class="sd">        - dict: Health information containing:</span>
<span class="sd">            - is_healthy: bool - True if recent activity detected</span>
<span class="sd">            - last_received: datetime or None - Last message received time</span>
<span class="sd">            - last_sent: datetime or None - Last message sent time</span>
<span class="sd">            - seconds_since_activity: float or None - Seconds since last activity</span>
<span class="sd">            - messages_received: int - Total messages received</span>
<span class="sd">            - messages_sent: int - Total messages sent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">last_activity</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Determine most recent activity</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span>
            <span class="n">last_activity</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">:</span>
            <span class="n">last_activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span>
            <span class="n">last_activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span>

        <span class="c1"># Calculate seconds since last activity</span>
        <span class="n">seconds_since_activity</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">last_activity</span><span class="p">:</span>
            <span class="n">seconds_since_activity</span> <span class="o">=</span> <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">last_activity</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

        <span class="c1"># Determine health status</span>
        <span class="n">is_healthy</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">seconds_since_activity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">is_healthy</span> <span class="o">=</span> <span class="n">seconds_since_activity</span> <span class="o">&lt;=</span> <span class="n">activity_timeout</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;is_healthy&#39;</span><span class="p">:</span> <span class="n">is_healthy</span><span class="p">,</span>
            <span class="s1">&#39;last_received&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">,</span>
            <span class="s1">&#39;last_sent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">,</span>
            <span class="s1">&#39;seconds_since_activity&#39;</span><span class="p">:</span> <span class="n">seconds_since_activity</span><span class="p">,</span>
            <span class="s1">&#39;messages_received&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="p">,</span>
            <span class="s1">&#39;messages_sent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_connection_healthy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the connection is healthy based on recent activity.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</span>

<span class="sd">        Returns:</span>
<span class="sd">        - bool: True if connection appears healthy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection_health_info</span><span class="p">(</span><span class="n">activity_timeout</span><span class="p">)[</span><span class="s1">&#39;is_healthy&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">enable_auto_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">inactivity_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable automatic ping mechanism for the controller.</span>

<span class="sd">        The controller will automatically send ping messages to all nodes if there&#39;s</span>
<span class="sd">        been no activity for the specified threshold period. Nodes will automatically</span>
<span class="sd">        respond with pong messages.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - interval: How often to check for inactive connections (default: 10.0 seconds)</span>
<span class="sd">        - inactivity_threshold: Send ping if no activity for this many seconds (default: 5.0)</span>

<span class="sd">        Note: This is primarily useful for LISTENER mode to verify node connections.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inactivity_threshold</span> <span class="o">=</span> <span class="n">inactivity_threshold</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Auto-ping enabled: check every </span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">s, ping after </span><span class="si">{</span><span class="n">inactivity_threshold</span><span class="si">}</span><span class="s2">s inactivity&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">disable_auto_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable automatic ping mechanism.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Auto-ping disabled&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">enable_auto_pong</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Enable automatic pong responses (enabled by default).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-pong enabled&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">disable_auto_pong</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable automatic pong responses.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-pong disabled&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually send a ping message to all connected nodes.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - int: Number of pings sent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ping_message</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;__type__&quot;</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()}</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">ping_message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ping sent (total: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_auto_ping_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal handler for automatic ping mechanism.</span>

<span class="sd">        Periodically checks for inactive connections and sends pings if needed.</span>
<span class="sd">        Only runs in LISTENER mode when auto_ping is enabled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_inactivity_threshold&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_inactivity_threshold</span> <span class="o">=</span> <span class="mf">5.0</span>

        <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_interval</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># Check if we need to send a ping</span>
                <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                <span class="n">should_ping</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span>
                    <span class="n">seconds_since_last_sent</span> <span class="o">=</span> <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">seconds_since_last_sent</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inactivity_threshold</span><span class="p">:</span>
                        <span class="n">should_ping</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">should_ping</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Never sent anything yet</span>

                <span class="k">if</span> <span class="n">should_ping</span><span class="p">:</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending ping due to inactivity&quot;</span><span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_ping</span><span class="p">()</span>

            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in auto-ping handler: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_receiver_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal handler that continuously receives messages from the bus.</span>

<span class="sd">        This infinite loop listens for incoming messages on the bus connection and</span>
<span class="sd">        places them in the incoming queue. Timeout exceptions are silently ignored</span>
<span class="sd">        to allow continuous polling. Other exceptions are logged.</span>

<span class="sd">        The loop runs until cancelled or an unhandled exception occurs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pynng_message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">arecv_msg</span><span class="p">()</span>

                <span class="c1"># Extract sender information from the message pipe</span>
                <span class="n">sender</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_sender_info</span><span class="p">(</span><span class="n">pynng_message</span><span class="o">.</span><span class="n">pipe</span><span class="p">)</span>

                <span class="c1"># Decode bytes to string, then parse JSON to dict</span>
                <span class="n">decoded_string</span> <span class="o">=</span> <span class="n">pynng_message</span><span class="o">.</span><span class="n">bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">decoded_string</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received non-JSON message from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">decoded_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;raw_data&quot;</span><span class="p">:</span> <span class="n">decoded_string</span><span class="p">}</span>

                <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">)</span>

                <span class="c1"># Track message receipt for connection health</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="c1"># DEBUG: Log every received message with count</span>
                <span class="n">msg_type</span> <span class="o">=</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__type__&quot;</span><span class="p">,</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">))</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[MSG #</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> received from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">: type=</span><span class="si">{</span><span class="n">msg_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Handle ping/pong messages</span>
                <span class="n">handled</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_ping_pong</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">handled</span><span class="p">:</span>
                    <span class="c1"># Normal message - put in queue for user</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received message from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">pynng_exceptions</span><span class="o">.</span><span class="n">Timeout</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Timeout is expected during polling</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in receiver handler: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">, type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_handle_ping_pong</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle ping/pong messages internally.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - message: The received message</span>
<span class="sd">        - sender: The sender information</span>

<span class="sd">        Returns:</span>
<span class="sd">        - bool: True if message was handled (ping/pong), False if it&#39;s a normal message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Data is already parsed as dict</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">data</span>
            <span class="n">message_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__type__&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">message_type</span> <span class="o">==</span> <span class="s2">&quot;ping&quot;</span><span class="p">:</span>
                <span class="c1"># Received ping - send pong if auto-pong enabled</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span><span class="p">:</span>
                    <span class="n">pong_message</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;__type__&quot;</span><span class="p">:</span> <span class="s2">&quot;pong&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
                        <span class="s2">&quot;ping_timestamp&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">)</span>
                    <span class="p">}</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">pong_message</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_pong_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received ping from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">, sent pong (total pongs: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pong_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received ping from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2"> (auto-pong disabled)&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="k">elif</span> <span class="n">message_type</span> <span class="o">==</span> <span class="s2">&quot;pong&quot;</span><span class="p">:</span>
                <span class="c1"># Received pong response</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received pong from </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
            <span class="c1"># Doesn&#39;t have __type__ or invalid structure - treat as normal message</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_send_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal handler that continuously sends messages to the bus.</span>

<span class="sd">        This infinite loop retrieves messages from the outgoing queue and sends</span>
<span class="sd">        them to the bus connection. Any exceptions during sending are logged.</span>

<span class="sd">        The loop runs until cancelled or an unhandled exception occurs.</span>

<span class="sd">        Note: In LISTENER mode, waits for at least one connection before sending</span>
<span class="sd">        to avoid losing messages due to BUS protocol&#39;s best-effort delivery.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Wait for at least one connection in LISTENER mode before sending</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">LISTENER</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;LISTENER mode: waiting for node connections before sending...&quot;</span><span class="p">)</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node connected, sender ready (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span><span class="si">}</span><span class="s2"> connections)&quot;</span><span class="p">)</span>

        <span class="k">while</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

                <span class="c1"># Track message send for connection health</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="c1"># DEBUG: Log message type before sending</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                    <span class="n">msg_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__type__&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">msg_type</span> <span class="o">=</span> <span class="s2">&quot;non-json&quot;</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[SEND #</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> sending: type=</span><span class="si">{</span><span class="n">msg_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">asend</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in send handler: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">, type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">add_post_pipe_connect_cb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_post_connect_callback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">add_post_pipe_remove_cb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_post_remove_callback</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipe callbacks registered for connection on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_post_connect_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipe</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal callback when a new pipe connects.&quot;&quot;&quot;</span>
        <span class="c1"># IMMEDIATE logging to verify callback is being called</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[CALLBACK] _post_connect_callback ENTERED for pipe </span><span class="si">{</span><span class="n">pipe</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[CALLBACK] _post_connect_callback ENTERED for pipe </span><span class="si">{</span><span class="n">pipe</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sender</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_sender_info</span><span class="p">(</span><span class="n">pipe</span><span class="p">)</span>
            <span class="n">conn_info</span> <span class="o">=</span> <span class="n">ConnectionInfo</span><span class="p">(</span>
                <span class="n">pipe_id</span><span class="o">=</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span>
                <span class="n">connected_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">[</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn_info</span>
            <span class="c1"># Enhanced logging with pipe details</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connection established - Pipe ID: </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, Sender: </span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">, &quot;</span>
                       <span class="sa">f</span><span class="s2">&quot;Local: </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">local_address</span><span class="si">}</span><span class="s2">, Remote: </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">remote_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active connections after connect: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span><span class="si">}</span><span class="s2"> - &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;IDs: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in connect callback: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Traceback: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_post_remove_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipe</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal callback when a pipe disconnects.&quot;&quot;&quot;</span>
        <span class="c1"># IMMEDIATE logging to verify callback is being called</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">traceback</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_stack</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[CALLBACK] _post_remove_callback ENTERED for pipe </span><span class="si">{</span><span class="n">pipe</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[CALLBACK] _post_remove_callback ENTERED for pipe </span><span class="si">{</span><span class="n">pipe</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[CALLBACK] Call stack:</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Last 5 frames</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">conn_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">conn_info</span><span class="p">:</span>
                <span class="n">duration</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">conn_info</span><span class="o">.</span><span class="n">connected_at</span>
                <span class="c1"># Include message stats for debugging connection issues</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CONNECTION CLOSED - Pipe ID: </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, Sender: </span><span class="si">{</span><span class="n">conn_info</span><span class="o">.</span><span class="n">sender</span><span class="si">}</span><span class="s2">, &quot;</span>
                              <span class="sa">f</span><span class="s2">&quot;Duration: </span><span class="si">{</span><span class="n">duration</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s, &quot;</span>
                              <span class="sa">f</span><span class="s2">&quot;Messages sent: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span><span class="si">}</span><span class="s2">, &quot;</span>
                              <span class="sa">f</span><span class="s2">&quot;Messages received: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipe </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> disconnected but not found in active connections&quot;</span><span class="p">)</span>

            <span class="n">remaining</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active connections after disconnect: </span><span class="si">{</span><span class="n">remaining</span><span class="si">}</span><span class="s2"> - &quot;</span>
                       <span class="sa">f</span><span class="s2">&quot;IDs: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Warn if this was the last connection for a DIALER (node)</span>
            <span class="k">if</span> <span class="n">remaining</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">DIALER</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DIALER has no active connections - waiting for reconnection&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in disconnect callback: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_extract_sender_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipe</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract sender information from the message pipe.</span>

<span class="sd">        Handles both TCP and IPC addresses. For TCP, extracts the IP address.</span>
<span class="sd">        For IPC, returns the pipe URL.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - pipe: The pynng pipe object containing remote address information.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - str: The sender identifier (IP address for TCP, URL for IPC).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">remote_addr</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">remote_address</span>
            <span class="c1"># Check if it&#39;s a TCP address (has &#39;addr&#39; attribute)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">remote_addr</span><span class="p">,</span> <span class="s1">&#39;addr&#39;</span><span class="p">):</span>
                <span class="n">as_bytes</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">remote_addr</span><span class="o">.</span><span class="n">addr</span><span class="p">)</span>
                <span class="n">ip</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">inet_ntop</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">as_bytes</span><span class="p">)</span>
                <span class="n">port</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">ntohs</span><span class="p">(</span><span class="n">remote_addr</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># For IPC or other address types, use the pipe URL</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pipe</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error extracting sender info: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">hub_address</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize Nng_bus_hub instance with address and operational mode.</p>
<p>Parameters:
- hub_address (str): The address to connect or listen for bus connections.
- mode (Mode): The operational mode - LISTENER (listens) or DIALER (dials)</p>
<p>The instance will set up incoming and outgoing message queues for asynchronous message handling.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hub_address</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span><span class="n">Mode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Nng_bus_hub instance with address and operational mode.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - hub_address (str): The address to connect or listen for bus connections.</span>
<span class="sd">    - mode (Mode): The operational mode - LISTENER (listens) or DIALER (dials)</span>

<span class="sd">    The instance will set up incoming and outgoing message queues for asynchronous message handling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ConnectionInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># pipe_id -&gt; ConnectionInfo</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">hub_address</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

    <span class="c1"># Connection health tracking</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Ping/pong configuration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Nodes auto-respond by default</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_pong_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.disable_auto_ping" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disable_auto_ping</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Disable automatic ping mechanism.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disable_auto_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Disable automatic ping mechanism.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Auto-ping disabled&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.disable_auto_pong" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disable_auto_pong</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Disable automatic pong responses.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disable_auto_pong</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Disable automatic pong responses.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-pong disabled&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.enable_auto_ping" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">enable_auto_ping</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">inactivity_threshold</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Enable automatic ping mechanism for the controller.</p>
<p>The controller will automatically send ping messages to all nodes if there's
been no activity for the specified threshold period. Nodes will automatically
respond with pong messages.</p>
<p>Parameters:
- interval: How often to check for inactive connections (default: 10.0 seconds)
- inactivity_threshold: Send ping if no activity for this many seconds (default: 5.0)</p>
<p>Note: This is primarily useful for LISTENER mode to verify node connections.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enable_auto_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">inactivity_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enable automatic ping mechanism for the controller.</span>

<span class="sd">    The controller will automatically send ping messages to all nodes if there&#39;s</span>
<span class="sd">    been no activity for the specified threshold period. Nodes will automatically</span>
<span class="sd">    respond with pong messages.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - interval: How often to check for inactive connections (default: 10.0 seconds)</span>
<span class="sd">    - inactivity_threshold: Send ping if no activity for this many seconds (default: 5.0)</span>

<span class="sd">    Note: This is primarily useful for LISTENER mode to verify node connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_enabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_interval</span> <span class="o">=</span> <span class="n">interval</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inactivity_threshold</span> <span class="o">=</span> <span class="n">inactivity_threshold</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Auto-ping enabled: check every </span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">s, ping after </span><span class="si">{</span><span class="n">inactivity_threshold</span><span class="si">}</span><span class="s2">s inactivity&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.enable_auto_pong" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">enable_auto_pong</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Enable automatic pong responses (enabled by default).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enable_auto_pong</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enable automatic pong responses (enabled by default).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_auto_pong_enabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Auto-pong enabled&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.get_active_connections" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_active_connections</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get a list of all active connections.</p>
<p>Returns:
- List[ConnectionInfo]: List of all active connection information.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_active_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ConnectionInfo</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of all active connections.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - List[ConnectionInfo]: List of all active connection information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.get_connection_count" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_connection_count</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get the number of active connections.</p>
<p>Returns:
- int: Number of currently active connections.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_connection_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the number of active connections.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - int: Number of currently active connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_connections</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.get_connection_health_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_connection_health_info</span><span class="p">(</span><span class="n">activity_timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get connection health information based on message activity.</p>
<p>This is particularly useful for DIALERs to check if they're still 
connected to the controller, since nodes don't track the controller
connection in active_connections.</p>
<p>Parameters:
- activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</p>
        <ul>
<li>dict: Health information containing:<ul>
<li>is_healthy: bool - True if recent activity detected</li>
<li>last_received: datetime or None - Last message received time</li>
<li>last_sent: datetime or None - Last message sent time</li>
<li>seconds_since_activity: float or None - Seconds since last activity</li>
<li>messages_received: int - Total messages received</li>
<li>messages_sent: int - Total messages sent</li>
</ul>
</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_connection_health_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get connection health information based on message activity.</span>

<span class="sd">    This is particularly useful for DIALERs to check if they&#39;re still </span>
<span class="sd">    connected to the controller, since nodes don&#39;t track the controller</span>
<span class="sd">    connection in active_connections.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</span>

<span class="sd">    Returns:</span>
<span class="sd">    - dict: Health information containing:</span>
<span class="sd">        - is_healthy: bool - True if recent activity detected</span>
<span class="sd">        - last_received: datetime or None - Last message received time</span>
<span class="sd">        - last_sent: datetime or None - Last message sent time</span>
<span class="sd">        - seconds_since_activity: float or None - Seconds since last activity</span>
<span class="sd">        - messages_received: int - Total messages received</span>
<span class="sd">        - messages_sent: int - Total messages sent</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">last_activity</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Determine most recent activity</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span>
        <span class="n">last_activity</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">:</span>
        <span class="n">last_activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">:</span>
        <span class="n">last_activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span>

    <span class="c1"># Calculate seconds since last activity</span>
    <span class="n">seconds_since_activity</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">last_activity</span><span class="p">:</span>
        <span class="n">seconds_since_activity</span> <span class="o">=</span> <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">last_activity</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

    <span class="c1"># Determine health status</span>
    <span class="n">is_healthy</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">seconds_since_activity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">is_healthy</span> <span class="o">=</span> <span class="n">seconds_since_activity</span> <span class="o">&lt;=</span> <span class="n">activity_timeout</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;is_healthy&#39;</span><span class="p">:</span> <span class="n">is_healthy</span><span class="p">,</span>
        <span class="s1">&#39;last_received&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_received</span><span class="p">,</span>
        <span class="s1">&#39;last_sent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_message_sent</span><span class="p">,</span>
        <span class="s1">&#39;seconds_since_activity&#39;</span><span class="p">:</span> <span class="n">seconds_since_activity</span><span class="p">,</span>
        <span class="s1">&#39;messages_received&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages_received_count</span><span class="p">,</span>
        <span class="s1">&#39;messages_sent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages_sent_count</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.get_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_message</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Retrieve a message from the incoming queue.</p>
        <ul>
<li>Message: The next message received from the bus. The <code>data</code> field is already JSON-decoded as a dict.
           This method blocks until a message is available.</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve a message from the incoming queue.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - Message: The next message received from the bus. The `data` field is already JSON-decoded as a dict.</span>
<span class="sd">               This method blocks until a message is available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.is_connection_healthy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_connection_healthy</span><span class="p">(</span><span class="n">activity_timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Check if the connection is healthy based on recent activity.</p>
<p>Parameters:
- activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</p>
<p>Returns:
- bool: True if connection appears healthy</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_connection_healthy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activity_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the connection is healthy based on recent activity.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - activity_timeout: Seconds of inactivity before considering unhealthy (default: 30.0)</span>

<span class="sd">    Returns:</span>
<span class="sd">    - bool: True if connection appears healthy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection_health_info</span><span class="p">(</span><span class="n">activity_timeout</span><span class="p">)[</span><span class="s1">&#39;is_healthy&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.send_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Queue a message to be sent to the bus.</p>
<p>Parameters:
- message (dict | Message): The message to be sent. Must be a dict or Message object with dict data.</p>
<p>Raises:
- TypeError: If message is not a dict or Message object, or if Message.data is not a dict.</p>
<p>The message is JSON-encoded and placed in the outgoing queue to be sent by the sender handler.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">Message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Queue a message to be sent to the bus.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - message (dict | Message): The message to be sent. Must be a dict or Message object with dict data.</span>

<span class="sd">    Raises:</span>
<span class="sd">    - TypeError: If message is not a dict or Message object, or if Message.data is not a dict.</span>

<span class="sd">    The message is JSON-encoded and placed in the outgoing queue to be sent by the sender handler.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract data from Message object or use raw data</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">Message</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message.data must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">message</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;send_message requires dict or Message, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># JSON-encode the dict</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.send_ping" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_ping</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Manually send a ping message to all connected nodes.</p>
<p>Returns:
- int: Number of pings sent</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manually send a ping message to all connected nodes.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - int: Number of pings sent</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ping_message</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;__type__&quot;</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()}</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">ping_message</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ping sent (total: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ping_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.start" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Start the bus communication by initializing the connection and launching message handlers.</p>
<p>This method starts the bus connection based on the mode (LISTENER or DIALER),
then launches infinite receiver and sender loops. It monitors both tasks and
exits when the first exception occurs or connection is broken, properly cleaning
up all running tasks.</p>
<p>Raises:
- ValueError: If an unknown mode is set.
- Exception: Re-raises any exception that occurs during task execution after cleanup.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Start the bus communication by initializing the connection and launching message handlers.</span>

<span class="sd">    This method starts the bus connection based on the mode (LISTENER or DIALER),</span>
<span class="sd">    then launches infinite receiver and sender loops. It monitors both tasks and</span>
<span class="sd">    exits when the first exception occurs or connection is broken, properly cleaning</span>
<span class="sd">    up all running tasks.</span>

<span class="sd">    Raises:</span>
<span class="sd">    - ValueError: If an unknown mode is set.</span>
<span class="sd">    - Exception: Re-raises any exception that occurs during task execution after cleanup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">LISTENER</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_listener</span><span class="p">()</span>
        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">DIALER</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dialer</span><span class="p">()</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">sender_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_send_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sender&quot;</span><span class="p">)</span>
        <span class="n">receiver_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_receiver_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;receiver&quot;</span><span class="p">)</span>
        <span class="n">ping_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_auto_ping_handler</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ping&quot;</span><span class="p">)</span>

        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">sender_task</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">]</span>
        <span class="n">task_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">sender_task</span><span class="p">:</span> <span class="s2">&quot;sender&quot;</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">:</span> <span class="s2">&quot;receiver&quot;</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">}</span>

        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> tasks started: sender, receiver, ping&quot;</span><span class="p">)</span>

        <span class="n">done_tasks</span><span class="p">,</span> <span class="n">pending_tasks</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">return_when</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">FIRST_EXCEPTION</span><span class="p">)</span>

        <span class="c1"># Check if completed task had an exception</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">done_tasks</span><span class="p">:</span>
            <span class="n">task_name</span> <span class="o">=</span> <span class="n">task_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> handler failed: </span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">())</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> handler exited unexpectedly (no exception)&quot;</span><span class="p">)</span>

        <span class="c1"># Log pending task cancellation</span>
        <span class="n">pending_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">task_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">pending_tasks</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pending_names</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cancelling pending tasks: </span><span class="si">{</span><span class="n">pending_names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Cancel and await pending tasks</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">pending_tasks</span><span class="p">:</span>
            <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">task</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NNG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> start() exiting - all tasks terminated&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred while starting tasks: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Cancel any running tasks</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="p">[</span><span class="n">sender_task</span><span class="p">,</span> <span class="n">receiver_task</span><span class="p">,</span> <span class="n">ping_task</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">task</span>
                <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.start_dialer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_dialer</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the bus connection in DIALER mode (dialing to controller).</p>
<p>Creates a Bus0 socket that dials to the configured address with a 100ms receive timeout.
TCP keepalive is enabled BEFORE dialing to ensure it applies to the connection.
Non-blocking dial is used to allow reconnection if controller is not yet available.
Callbacks are registered BEFORE dialing to ensure no connection events are missed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_dialer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the bus connection in DIALER mode (dialing to controller).</span>

<span class="sd">    Creates a Bus0 socket that dials to the configured address with a 100ms receive timeout.</span>
<span class="sd">    TCP keepalive is enabled BEFORE dialing to ensure it applies to the connection.</span>
<span class="sd">    Non-blocking dial is used to allow reconnection if controller is not yet available.</span>
<span class="sd">    Callbacks are registered BEFORE dialing to ensure no connection events are missed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create socket first, set options and callbacks, then dial (non-blocking for reconnection support)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">Bus0</span><span class="p">(</span><span class="n">recv_timeout</span><span class="o">=</span><span class="n">RECV_TIMEOUT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Set explicit reconnection parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_min</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># 1 second minimum</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_max</span> <span class="o">=</span> <span class="mi">30000</span>  <span class="c1"># 30 seconds maximum</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_callbacks</span><span class="p">()</span>  <span class="c1"># Register callbacks BEFORE dial to catch all events</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DIALER options set: tcp_keepalive=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span>
                 <span class="sa">f</span><span class="s2">&quot;reconnect_time_min=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_min</span><span class="si">}</span><span class="s2">ms, &quot;</span> <span class="o">+</span>
                 <span class="sa">f</span><span class="s2">&quot;reconnect_time_max=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">reconnect_time_max</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">dial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DIALER dialing </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2"> (non-blocking)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cuemsutils.tools.HubServices.NngBusHub.start_listener" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_listener</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the bus connection in LISTENER mode (listening for connections).</p>
<p>Creates a Bus0 socket that listens on the configured address with a 100ms receive timeout.
TCP keepalive is enabled BEFORE listening to ensure it applies to all connections.
Callbacks are registered BEFORE listening to ensure no connection events are missed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/cuemsutils/tools/HubServices.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the bus connection in LISTENER mode (listening for connections).</span>

<span class="sd">    Creates a Bus0 socket that listens on the configured address with a 100ms receive timeout.</span>
<span class="sd">    TCP keepalive is enabled BEFORE listening to ensure it applies to all connections.</span>
<span class="sd">    Callbacks are registered BEFORE listening to ensure no connection events are missed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create socket first, set options and callbacks, then listen</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">Bus0</span><span class="p">(</span><span class="n">recv_timeout</span><span class="o">=</span><span class="n">RECV_TIMEOUT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_callbacks</span><span class="p">()</span>  <span class="c1"># Register callbacks BEFORE listen to catch all events</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
    <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LISTENER started on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">, tcp_keepalive=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">tcp_keepalive</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.SignalEngine"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.SignalEngine.SignalEngine" class="doc doc-heading">
            <code>SignalEngine</code>


</h2>


    <div class="doc doc-contents ">



        <p>A class that handles system signals and status tracking.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/SignalEngine.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SignalEngine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that handles system signals and status tracking.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_signals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">getpid</span><span class="p">()</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> with PID </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">with_signals</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_signals</span><span class="p">()</span>

    <span class="c1">### RUNNING LOGIC ###</span>
    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> started&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">restart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">max_tick</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
            <span class="n">sleep</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_tick</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">tick</span> <span class="o">&lt;</span> <span class="n">max_tick</span><span class="p">:</span>
                    <span class="n">tick</span> <span class="o">+=</span> <span class="mf">0.01</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="nd">@logged</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_requested</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;stop_all&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stop_all</span><span class="p">()</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">Logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Exception when calling stop_all&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1">### COMMUNICATE WITH SYSTEMD ###</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">notify_systemd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;READY&#39;</span><span class="p">):</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Startup complete, notifying systemd&#39;</span><span class="p">)</span>
        <span class="n">notify_systemd_daemon</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s1">=1&#39;</span><span class="p">)</span>

    <span class="c1">### SIGNALS HANDLERS ###</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_interrupt</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_terminate</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGUSR1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_print_running</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGUSR2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_print_all</span><span class="p">)</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGCHLD</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_child_signal</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigNum</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SIGINT received! Exiting with result code: </span><span class="si">{</span><span class="n">sigNum</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">string</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigNum</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SIGTERM received! Exiting with result code: </span><span class="si">{</span><span class="n">sigNum</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">string</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_print_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigNum</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;STATUS REQUEST BY SIGUSR2 SIGNAL </span><span class="si">{</span><span class="n">sigNum</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;print_all_status&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_all_status</span><span class="p">()</span>  <span class="c1"># type: ignore[attr-defined]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_print_running</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigNum</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">run_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="k">else</span> <span class="s2">&quot; NOT&quot;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SIGNAL </span><span class="si">{</span><span class="n">sigNum</span><span class="si">}</span><span class="s2"> recieved: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is</span><span class="si">{</span><span class="n">run_str</span><span class="si">}</span><span class="s2"> running&quot;</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_child_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigNum</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.StringSanitizer"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.StringSanitizer.StringSanitizer" class="doc doc-heading">
            <code>StringSanitizer</code>


</h2>


    <div class="doc doc-contents ">



        <p>Ensure that the string is sanitized and safe for use in the system</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/StringSanitizer.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StringSanitizer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that the string is sanitized and safe for use in the system&quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sanitize_text_size</span><span class="p">(</span><span class="n">_string</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">_string</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_string</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">65535</span><span class="p">):</span>
            <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">65534</span><span class="p">]</span> <span class="c1"># return frist 255 characters</span>
        <span class="k">return</span> <span class="n">_string</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sanitize_name</span><span class="p">(</span><span class="n">_string</span><span class="p">):</span> <span class="c1">#TODO: scape characters?</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_string</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="p">:</span>
            <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">254</span><span class="p">]</span> <span class="c1"># return frist 255 characters</span>
        <span class="k">return</span> <span class="n">_string</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sanitize_file_name</span><span class="p">(</span><span class="n">_string</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_string</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">240</span> <span class="p">:</span>
            <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">236</span><span class="p">]</span> <span class="o">+</span> <span class="n">_string</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="c1"># return frist 236 characters + last 4 chars = total 240 of max 255. Leave room for versioning and .tmp</span>

        <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">keepcharacters</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">_string</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keepcharacters</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sanitize_dir_name</span><span class="p">(</span><span class="n">_string</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_string</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">240</span> <span class="p">:</span>
            <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">236</span><span class="p">]</span> <span class="o">+</span> <span class="n">_string</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="c1"># return frist 236 characters + last 4 chars = total 240 of max 255. Leave room for versioning and .tmp</span>

        <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">keepcharacters</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">_string</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keepcharacters</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sanitize_dir_permit_increment</span><span class="p">(</span><span class="n">_string</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_string</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">240</span> <span class="p">:</span>
            <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">236</span><span class="p">]</span> <span class="o">+</span> <span class="n">_string</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="c1"># return frist 236 characters + last 4 chars = total 240 of max 255. Leave room for versioning and .tmp</span>

        <span class="n">_string</span> <span class="o">=</span> <span class="n">_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">keepcharacters</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">_string</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keepcharacters</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="cuemsutils.tools.Uuid"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="cuemsutils.tools.Uuid.Uuid" class="doc doc-heading">
            <code>Uuid</code>


</h2>


    <div class="doc doc-contents ">



        <p>A class to interact with unique identifiers.</p>
<p>Comparisions should be made based on memory allocation.</p>
<p>Calling or printing the instance will return the uuid4 string.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/cuemsutils/tools/Uuid.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Uuid</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class to interact with unique identifiers.</span>

<span class="sd">        Comparisions should be made based on memory allocation.</span>

<span class="sd">        Calling or printing the instance will return the uuid4 string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">uuid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;uuid </span><span class="si">{</span><span class="n">uuid</span><span class="si">}</span><span class="s1"> is not valid&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Uuid</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">uuid</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">==</span> <span class="n">other</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__json__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">match</span><span class="p">(</span><span class="n">UUID4_REGEX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>